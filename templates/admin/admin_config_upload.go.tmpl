package admin

// UploadPaths is an index of upload options
var UploadPaths = map[string]*files.UploadOptions{
	{{- range $i, $entity := .Entities}}
	{{- range $entity.GetFileFields}}
	"{{lower $entity.Name}}/{{lower .Name}}":	&{{$entity.Name}}{{.Name}}UploadOpts,
	{{- end}}
	{{- if and ($entity.ContentBuilder.Generate)  ($entity.ContentBuilder.AllowUpload)}}
	{{- range $entity.ContentBuilder.UploadTypes}}
	"{{lower $entity.Name}}/content/{{lower .}}":	&{{$entity.Name}}Content{{.}}UploadOpts,
	{{- end}}
	{{- end}}
	{{- end}}
}

{{range $i, $entity := .Entities -}}
{{range $entity.GetFileFields }}
// {{$entity.Name}}{{.Name}}UploadOpts contains upload parameters for the "{{.Name}}" field in Entity "{{$entity.Name}}"
var {{$entity.Name}}{{.Name}}UploadOpts = files.UploadOptions{
	Dir:			"media",
	Destination:    "{{lower $entity.Name}}/{{lower .Name}}",
	MediaPrefixURL: "/media/",
	FileType:       files.TypeImage,
	MaxSize:        util.NoLimit,
	ConvertTo:      imagist.TypeImageJPG,
	ImgDimensions:  &imagist.ImageDimensions{
		MinWidth:       util.NoLimit,
		MinHeight:      util.NoLimit,
		Formats: []imagist.FormatDimensions{
			{Name: "thumb", Width: 400, Height: 200},
			{Name: "full", Width: util.NoLimit, Height: util.NoLimit, Watermark: imagist.BottomRight},
		},
	},
}
{{end}}

{{if and ($entity.ContentBuilder.Generate)  ($entity.ContentBuilder.AllowUpload)}}
{{range $entity.ContentBuilder.UploadTypes}}
// {{$entity.Name}}Content{{.}}UploadOpts contains upload parameters for the Content "{{.}}" Lardwaz field in Entity "{{$entity.Name}}"
var {{$entity.Name}}Content{{.}}UploadOpts = files.UploadOptions{
	Dir:			"media",
	Destination:    "{{lower $entity.Name}}/content/{{lower .}}",
	MediaPrefixURL: "/media/",
	FileType:       files.TypeImage,
	MaxSize:        util.NoLimit,
	ConvertTo:      imagist.TypeImageJPG,
	ImgDimensions:  &imagist.ImageDimensions{
		MinWidth:       util.NoLimit,
		MinHeight:      util.NoLimit,
		Formats: []imagist.FormatDimensions{
			{Name: "thumb", Width: 400, Height: 200},
			{Name: "full", Width: util.NoLimit, Height: util.NoLimit, Watermark: imagist.BottomRight},
		},
	},
}
{{end}}
{{end}}
{{end}}